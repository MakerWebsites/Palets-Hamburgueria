<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>Cardápio Digital</title>
</head>

<body>
    <header>
        <p id="price-fixed">Valor total R$ <span id="total-price">0,00</span> <mark>Palet's Burger</mark></p>
    </header>
    <div class="container">
        <h1>Cardápio Digital</h1>

        <div id="menu" class="menu"></div>

        <div class="bag">
            <h2 id="sacola">Sua Sacola</h2>
            <ul id="bag-items"></ul>
        </div>

        <form id="order-form" onsubmit="return validateForm()">
            <h2>Finalizar Pedido</h2>
            <label for="customer-name">Nome</label>
            <input type="text" id="customer-name" placeholder="Seu nome" required>

            <label for="customer-address">Endereço</label>
            <input type="text" id="customer-address" placeholder="Seu endereço" required>

            <label for="customer-number">Número</label>
            <input type="text" id="customer-number" placeholder="Número da residência" required>

            <label for="customer-bairro">Bairro e taxa entrega</label>
            <select id="customer-bairro" required onchange="updateBairroPrice()">
                <option value="Centro-6,00">Centro - R$ 6,00</option>
                <option value="Vila louro-6,00">Vila Louro - R$ 6,00</option>
                <option value="Jd boa vista-6,00">Jd Boa Vista - R$ 6,00</option>
                <option value="Jd São Paulo-6,00">Jd São Paulo - R$ 6,00</option>
                <option value="Jd Madalena-6,00">Jd Madalena - R$ 6,00</option>
                <option value="Jd Brasil-6,00">Jd Brasil - R$ 6,00</option>
                <option value="Florida 1-8,00">Florida 1 - R$ 8,00</option>
                <option value="Florida 2-9,00">Florida 2 - R$ 9,00</option>
                <option value="Filipinho-8,00">Filipinho - R$ 8,00</option>
                <option value="Vila Cristina-9,00">Vila Cristina - R$ 9,00</option>
                <option value="Valflor-10,00">Valflor - R$ 10,00</option>
                <option value="Portaria 1-10,00">Portaria 1 - R$ 10,00</option>
                <option value="Portaria 2-15,00">Portaria 2 - R$ 15,00</option>
                <option value="Chácara Nunes-10,00">Chácara Nunes - R$ 10,00</option>
                <option value="Jd São José-10,00">Jd São José - R$ 10,00</option>
                <option value="Holanda-15,00">Holanda - R$ 15,00</option>
                <option value="Paulistinha-18,00">Paulistinha - R$ 18,00</option>
                <option value="Califórnia-25,00">Califórnia - R$ 25,00</option>
                <option value="Pq imperial-25,00">Pq Imperial - R$ 25,00</option>
                <option value="Santa Izabel-15,00">Santa Izabel - R$ 15,00</option>
                <option value="Granjinha-14,00">Granjinha - R$ 14,00</option>
                <option value="Bonanza-12,00">Bonanza - R$ 12,00</option>
                <option value="Cipó-15,00">Cipó - R$ 15,00</option>
                <option value="Cipó campestre-18,00">Cipó Campestre - R$ 18,00</option>
                <option value="Vila Dirce-15,00">Vila Dirce - R$ 15,00</option>
                <option value="Santa fé-15,00">Santa Fé - R$ 15,00</option>
                <option value="Congonhal-25,00">Congonhal - R$ 25,00</option>
                <option value="Sapateiro-20,00">Sapateiro - R$ 20,00</option>
                <option value="Lagoa grande-18,00">Lagoa Grande - R$ 18,00</option>
                <option value="Recanto lagoa-12,00">Recanto Lagoa - R$ 12,00</option>
                <option value="Recanto das vertentes-18,00">Recanto das Vertentes - R$ 18,00</option>
                <option value="Vale florido-20,00">Vale Florido - R$ 20,00</option>
                <option value="Santa Rita-40,00">Santa Rita - R$ 40,00</option>
                <option value="Penteado-35,00">Penteado - R$ 35,00</option>
            </select>

            
            <div>
                <label> Cartão
                    <input type="checkbox" name="payment-option" value="Cartão Crédito/Débito">
                </label>
                <label>Pix
                    <input type="checkbox" name="payment-option" value="Pix">
                </label>

            </div>

            <label for="troco">Dinheiro</label>
            <input type="checkbox" id="troco" name="payment-option" onchange="toggleTrocoInput()">
            <input type="number" id="troco-valor" placeholder="Valor para troco" style="display:none;">

            <button type="submit">Enviar Pedido</button>
        </form>
        <h6><mark>Palet's Burger&copy;</mark> todos os direitos reservados. Desenvolvido por <mark>Antolin Junior</mark>
        <a style="color: rgba(255, 255, 255, 0.815);" href="admin.html">Adm.</a></h6>
        <img src="" alt="">
    </div>
    <footer>
        <a style="text-decoration: none; color: white;" href="#sacola"><i style="font-size: 20px;" class="fas fa-shopping-basket"></i> Sacola</a>
        <a style="text-decoration: none; color: white;" href="#order-form"><i style="font-size: 20px;" class="fas fa-map-marker-alt"></i> Cadastro de Entrega
        </a>
    </footer>

    <script>
        const menuData = {
            "Hambúrgueres": [
                {
                    name: "Bacon",
                    description: "Pão brioche, carne, queijo prato, bacon fatiado e creme de queijo.",
                    discount: 0,
                    price: 23.00,
                    image: "assets/imagens/bacon-hamburguer-imagem.jpeg"
                },

                {
                    name: "Palets", description: "Pão brioche, carne, queijo coalho, rúcula, maionese de alho e cebola roxa.",
                    discount: 0,
                    price: 30,
                    image: "assets/imagens/palets-hamburguer-imagem.jpeg"
                },

                {
                    name: "Esquina",
                    description: "Pão brioche, carne, fatia de cheddar, picles, cebola picada, mostarda e ketchup.",
                    discount: 0,
                    price: 26,
                    image: "assets/imagens/esquina-hamburguer-imagem.jpeg"
                },

                {
                    name: "Costela",
                    description: "Pão brioche, carne, queijo queijo prato, alface, tomate, farofa de bacon, maionese e cebola crispy.",
                    discount: 0,
                    price: 28,
                    image: "assets/imagens/costela-hamburguer-imagem.jpeg"
                },

                {
                    name: "Fitness",
                    description: "Pão brioche, carne, queijo prato, alface, tomate, cebola roxa e molho tasty.",
                    discount: 0,
                    price: 24,
                    image: "assets/imagens/fitness-hamburguer-imagem.jpeg"
                },

                {
                    name: "Clássico",
                    description: "Pão brioche, carne, cheddar especial, cebola caramelizada e bacon triturado.",
                    discount: 0,
                    price: 29,
                    image: "Molho de Soja com Gergelim (Simples e Saboroso)-burger.jpg"
                },

                {
                    name: "Cheddar",
                    description: "Pão brioche, carne, creme de cheddar, cebola crispy, e bacon fatiado.",
                    discount: 0,
                    price: 25,
                    image: "Molho de Soja com Gergelim (Simples e Saboroso)-burger.jpg"
                }

            ],

            "Combos": [

                {
                    name: "Combo 1",
                    description: "Cheeseburger, batata e refrigerante",
                    discount: 0,
                    price: 20,
                    image: "Molho de Soja com Gergelim (Simples e Saboroso)-burger.jpg"
                }

            ],

            "Bebidas": [

                {
                    name: "Refrigerante",
                    description: "Lata 350ml",
                    discount: 0,
                    price: 5.22,
                    image: "Molho de Soja com Gergelim (Simples e Saboroso)-burger.jpg"
                },

                {
                    name: "Refrigerante",
                    description: "Lata 350ml",
                    discount: 0,
                    price: 5.45,
                    image: "Molho de Soja com Gergelim (Simples e Saboroso)-burger.jpg"
                }

            ]

        };

        const menuDiv = document.getElementById('menu');
        const bag = JSON.parse(localStorage.getItem('bag')) || [];
        let totalPrice = 0;

        // Exibir menu de produtos
        for (const [section, products] of Object.entries(menuData)) {
            const sectionDiv = document.createElement('div');
            sectionDiv.classList.add('section');
            sectionDiv.innerHTML = `<h2>${section}</h2>`;

            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.classList.add('product');

                const finalPrice = product.price - product.discount;

                productDiv.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div class="product-details">
                        <h3>${product.name}</h3>
                        <p>${product.description}</p>
                        <p>R$ ${finalPrice.toFixed(2).replace('.', ',')}</p>
                    </div>
                    <div class="product-actions">
                        <button onclick="addToBag('${product.name}', ${finalPrice})">Adicionar</button>
                    </div>
                    
                `;

                sectionDiv.appendChild(productDiv);
            });

            menuDiv.appendChild(sectionDiv);
        }

        // Função para adicionar item à sacola
        function addToBag(name, price) {
            bag.push({ name, price, date: new Date().toLocaleString() });
            localStorage.setItem('bag', JSON.stringify(bag));
            updateBag();
        }

        // Função para remover item da sacola
        function removeFromBag(index) {
            bag.splice(index, 1); // Remove da sacola
            localStorage.setItem('bag', JSON.stringify(bag));
            updateBag();
        }

        // Atualizar a sacola
        function updateBag() {
            const bagItems = document.getElementById('bag-items');
            const totalPriceElem = document.getElementById('total-price');
            bagItems.innerHTML = '';
            totalPrice = 0;

            bag.forEach((item, index) => {
                totalPrice += item.price;

                const li = document.createElement('li');
                li.innerHTML = `
                    ${item.name} - R$ ${item.price.toFixed(2).replace('.', ',')}
                    <button class="button-remover" onclick="removeFromBag(${index})">Remover</button>
                `;
                bagItems.appendChild(li);
            });

            totalPriceElem.textContent = totalPrice.toFixed(2).replace('.', ',');
        }

        // Função para enviar o pedido via WhatsApp
        function sendOrder() {
            const customerName = document.getElementById('customer-name').value;
            const customerAddress = document.getElementById('customer-address').value;
            const customerNumber = document.getElementById('customer-number').value;
            const customerBairro = document.getElementById('customer-bairro').value;
            const trocoValue = document.getElementById('troco-valor').value;

            const orderDetails = `
                *Nome do cliente:* ${customerName}
                *Endereço:* ${customerAddress}, ${customerNumber}
                *Bairro:* ${customerBairro}
                *Itens adicionados:* ${bag.map(item => `${item.name} - *R$* ${item.price.toFixed(2).replace('.', ',')}`).join(', ')}
                *Total: R$* ${totalPrice.toFixed(2).replace('.', ',')}  *+* *Bairro:* ${customerBairro}

                ${document.getElementById('troco').checked ? `*Troco para:* R$ ${trocoValue.replace('.', ',')}` : ''}

            `;

            const whatsappLink = `https://wa.me/5511968559541?text=${encodeURIComponent(orderDetails)}`;
            window.open(whatsappLink, '_blank');
        }

        function toggleTrocoInput() {
            const trocoInput = document.getElementById('troco-valor');
            trocoInput.style.display = document.getElementById('troco').checked ? 'block' : 'none';
        }

         function validateForm() {
             const paymentOptions = document.querySelectorAll('input[name="payment-option"]:checked');
             if (paymentOptions.length === 0) {
                 alert('Por favor, selecione pelo menos uma opção de pagamento.');
                 return false;
             }
             sendOrder();
             return false; // Evita o envio do formulário padrão
         }

        function updateBairroPrice() {
            const bairroSelect = document.getElementById('customer-bairro');
            const selectedBairro = bairroSelect.value;
            const price = parseFloat(selectedBairro.split('-')[1].replace(',', '.'));

            // Atualizar o preço total considerando o valor do bairro
            totalPrice += price;
            document.getElementById('total-price').textContent = totalPrice.toFixed(2).replace('.', ',');
        }

        updateBag(); // Atualizar a sacola ao carregar a página
    </script>
</body>

</html>